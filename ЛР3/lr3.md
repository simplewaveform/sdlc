

# Часть 1: Проектирование архитектуры системы

**Проект:** Сервис аренды автомобилей
**Стек технологий:** React, Node.js (Express), PostgreSQL

## 1. Тип приложения

Система проектируется как **Rich Internet Application (RIA)** на базе архитектуры **Single Page Application (SPA)**.

* **Frontend:** Клиентская часть реализуется на React, что обеспечивает высокую интерактивность и отсутствие перезагрузок страниц при навигации по каталогу.
* **Backend:** Серверная часть представляет собой **Stateless RESTful API**, который обрабатывает бизнес-логику и взаимодействует с базой данных, обмениваясь с клиентом данными в формате JSON.

## 2. Стратегия развёртывания

Для обеспечения воспроизводимости среды и упрощения масштабирования выбрана стратегия **контейнеризации**:

* **Docker:** Приложение разделяется на три контейнера: `frontend-container` (Nginx + статика), `backend-container` (Node.js runtime) и `db-container` (PostgreSQL).
* **Окружение:** На этапе разработки используется Docker Compose. Для продакшн-развертывания подразумевается использование VPS или облачных PaaS-решений.

## 3. Обоснование выбора технологий

* **JavaScript End-to-End:** Использование одного языка (JavaScript/TypeScript) для фронтенда и бэкенда снижает когнитивную нагрузку на команду и упрощает передачу структур данных.
* **React:** Выбран за компонентный подход, который идеально подходит для создания переиспользуемых элементов интерфейса (карточки авто, формы фильтрации) и эффективного обновления DOM при работе с большими списками.
* **Node.js & Express:** Легковесность и высокая производительность при обработке асинхронных запросов (I/O), что критично для API сервиса.
* **PostgreSQL:** Реляционная СУБД выбрана для обеспечения строгой целостности данных (ACID-транзакции), что необходимо при обработке бронирований и исключении двойной аренды одного авто.

## 4. Показатели качества

В соответствии с атрибутами качества, система должна соответствовать следующим критериям:

* **Производительность:** Время отклика API на запросы чтения каталога не должно превышать 200мс.
* **Безопасность:** Использование протокола HTTPS, защита от SQL-инъекций через ORM и авторизация на базе JWT-токенов.
* **Сопровождаемость:** Четкое разделение ответственности между слоями (Separation of Concerns) для независимого тестирования и обновления компонентов.
* **Доступность:** Архитектура должна позволять перезапуск отдельных сервисов без остановки всей системы.

## 5. Сквозная функциональность

Реализация механизмов, затрагивающих все слои приложения:

* **Аутентификация и авторизация:** Проверка прав доступа через Middleware на уровне сервера перед выполнением бизнес-логики.
* **Обработка исключений:** Единый механизм перехвата ошибок на бэкенде и стандартизированные ответы (Error Codes) для фронтенда.
* **Логирование:** Сбор логов запросов и ошибок (Winston/Morgan) для мониторинга состояния системы.
* **Валидация:** Проверка входных данных на соответствие схемам (например, Zod или Joi) до момента попадания данных в бизнес-слой.

---

## 6. Структурная схема приложения (Архитектура To-Be)

> ![Диаграмма развертывания](deployment-diagram.svg)

---

### Описание слоев функциональности:

1. **Слой представления:** React-компоненты и управление состоянием на стороне клиента.
2. **Слой сервисов:** REST API эндпоинты, принимающие запросы и управляющие сквозной функциональностью.
3. **Бизнес-слой:** Логика обработки заказов, расчет стоимости и правила валидации бизнес-объектов.
4. **Слой доступа к данным:** Инкапсуляция логики взаимодействия с PostgreSQL через ORM или Query Builder.

---